<!-- Put the timer -->
<h1>Countdown Clock</h1>
<div id="clockdiv">
  <div>
    <span class="hours"></span>
    <div class="smalltext">Hours</div>
  </div>
  <div>
    <span class="minutes"></span>
    <div class="smalltext">Minutes</div>
  </div>
  <div>
    <span class="seconds"></span>
    <div class="smalltext">Seconds</div>
  </div>
</div>

<script>
  window.addEventListener("load", function(event) {
    initializeClock('clockdiv', start);
  });
  // let start = <% @task.starts_at %>
  let start = new Date(Date.parse(new Date()) + 15 * 24 * 60 * 60 * 1000);
  // Fonction qui compte les secondes

  function getTime(starttime) {
    let t = Date.parse(starttime) + Date.parse(new Date());
    const seconds = Math.floor( (t/1000) % 60 );
    const minutes = Math.floor( (t/1000/60) % 60 );
    const hours = Math.floor( (t/(1000*60*60)) % 24 );
    const days = Math.floor( t/(1000*60*60*24) );
    return {
      'total': t,
      'hours': hours,
      'minutes': minutes,
      'seconds': seconds
    };

  function initializeClock(id, starttime) {
    const clock = document.getElementById(id);
    const hoursSpan = clock.querySelector('.hours');
    const minutesSpan = clock.querySelector('.minutes');
    const secondsSpan = clock.querySelector('.seconds');
    function updateClock() {
      let t = getTime(starttime);
      hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
      minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
      secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);
      if(t.total<=0){
        clearInterval(timeinterval);
      }
    }
  updateClock(); // run function once at first to avoid delay
  let timeinterval = setInterval(updateClock, 1000);
  }

</script>

<!-- Put the task description -->

<!-- Put button Pause/Stop -->
